<div class="row g-3">
    <input type="text" class="form-control" id="inId" value="@ViewData["id"]" hidden>
    <div class="col-10">
        <div>
            <label for="email" class="form-label">Email</label>
            <input type="text" class="form-control uppercase-input" id="inEmail" placeholder="Enter email" value="@ViewData["email"]">
        </div>
    </div>
    <div class="col-2">
        <div>
            <label class="form-check-label" for="isActive">Active</label>
            <input class="form-check-input d-block mt-18px ml-13px" type="checkbox" id="inIsActive" @(Convert.ToBoolean(ViewData["isActive"]) ? "checked" : "")>
        </div>
    </div>
    <div class="col-6">
        <div>
            <label for="firstname" class="form-label">First Name</label>
            <input type="text" class="form-control uppercase-input" id="inFirstname" placeholder="Enter firstname" value="@ViewData["firstname"]">
        </div>
    </div>
    <div class="col-6">
        <div>
            <label for="lastName" class="form-label">Last Name</label>
            <input type="text" class="form-control uppercase-input" id="inLastname" placeholder="Enter lastname" value="@ViewData["lastname"]">
        </div>
    </div>
    <div class="col-12">
        <div class="hstack gap-2 justify-content-end">
            <button type="button" class="btn btn-light" data-bs-dismiss="modal">Close</button>
            <button type="button" class="btn btn-success" onclick="updateUser()">Update</button>
        </div>
    </div>
</div>
<script type="text/javascript">
    document.querySelectorAll('.uppercase-input').forEach(input => {
        input.addEventListener('input', function() {
            this.value = this.value.toUpperCase();
        });
    });

    function updateUser() {
        try {
            fetch('updateUser', {
                method: 'post',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    id: $('#inId').val(),
                    email: $('#inEmail').val(),
                    firstname: $('#inFirstname').val(),
                    lastname: $('#inLastname').val(),
                    isActive: $('#inIsActive').prop('checked')
                })
            })
            .then(response => {
                return response.json();
            })
            .then(data => {
                if(!data.isSuccess) {
                    Swal.fire({
                        title: 'Error!!',
                        html: data.message,
                        icon: 'error',
                        confirmButtonClass: 'btn btn-danger w-xs mt-2',
                        buttonsStyling: !1,
                        footer: '',
                        showCloseButton:!1
                    });
                    return;
                }

                Swal.fire({
                    title: 'Succcess',
                    html: data.message,
                    icon: 'success',
                    confirmButtonClass: 'btn btn-success w-xs mt-2',
                    buttonsStyling: !1,
                    footer: '',
                    showCloseButton:!1
                }).then(function(t) {
                    $('#mdUpdateUser').modal('hide');
                    location.reload();
                });
            })
            .catch(error => {
                Swal.fire({
                    title: 'Error!!',
                    html: error,
                    icon: 'error',
                    confirmButtonClass: 'btn btn-danger w-xs mt-2',
                    buttonsStyling: !1,
                    footer: '',
                    showCloseButton:!1
                });
            });
        }
        catch(exception) {
            Swal.fire({
                title: 'Error!!',
                html: exception,
                icon: 'error',
                confirmButtonClass: 'btn btn-danger w-xs mt-2',
                buttonsStyling: !1,
                footer: '',
                showCloseButton:!1
            });
        }
    }
</script>